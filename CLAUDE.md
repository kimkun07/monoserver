# Claude Code ì‚¬ìš© ê°€ì´ë“œ - monoserver í”„ë¡œì íŠ¸

## ê°œìš”

ì´ ë¬¸ì„œëŠ” Claude Codeê°€ monoserver í”„ë¡œì íŠ¸ì—ì„œ íš¨ê³¼ì ìœ¼ë¡œ ì‘ì—…í•˜ê¸° ìœ„í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ êµ¬ì¡°

monoserver í”„ë¡œì íŠ¸ëŠ” **ì—¬ëŸ¬ ê°œì˜ ë…ë¦½ì ì¸ Taskë¡œ êµ¬ì„±**ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### Task ê¸°ë°˜ êµ¬ì¡°

ê° TaskëŠ”:
- **ë…ë¦½ì ì¸ ëª©í‘œ**ë¥¼ ê°€ì§€ê³  ìˆìŒ
- **ë…ë¦½ì ì¸ devlog íŒŒì¼**ë¡œ ì¶”ì ë¨ (`.claude/devlog/[task-name].md`)
- **ë…ë¦½ì ìœ¼ë¡œ ì™„ë£Œ** ê°€ëŠ¥
- **ì˜ì¡´ì„±**ì´ ìˆì„ ìˆ˜ ìˆìŒ (main.mdì˜ Task ì˜ì¡´ì„± ì°¸ì¡°)

### í˜„ì¬ Task ëª©ë¡

```
monoserver/
â”œâ”€â”€ caddyfile-generator/        # Task: Caddyfile ìë™ ìƒì„± (subdomain routing)
â”œâ”€â”€ scripts/                    # Task: ì„¤ì¹˜ ë° ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸
â”‚   â””â”€â”€ install-docker-rootless.sh
â”œâ”€â”€ .github/workflows/          # Task: GitHub Actions ì›Œí¬í”Œë¡œìš°
â”‚   â””â”€â”€ deploy.yml
â”œâ”€â”€ Caddyfile                    # Caddy ì„¤ì • (ìë™ ìƒì„±ë¨)
â”œâ”€â”€ compose.yaml                # Docker Compose ì„¤ì •
â””â”€â”€ .claude/devlog/             # Task ì§„í–‰ ìƒí™© ì¶”ì 
    â”œâ”€â”€ main.md                     # ì „ì²´ í”„ë¡œì íŠ¸ ì§„í–‰ ìƒí™©
    â”œâ”€â”€ caddyfile-generator.md      # Task: Caddyfile Generator
    â”œâ”€â”€ docker-rootless.md          # Task: Docker Rootless ì„¤ì¹˜
    â”œâ”€â”€ github-action.md            # Task: GitHub Actions
    â””â”€â”€ google-compute-engine.md    # Task: GCE ì„œë²„ ì„¤ì •
```

### Task ì´ë¦„ ê·œì¹™

- **ë””ë ‰í† ë¦¬/íŒŒì¼ ê¸°ë°˜**: `caddyfile-generator`, `docker-rootless`
- **ê¸°ëŠ¥ ê¸°ë°˜**: `github-action`, `google-compute-engine`
- **ë¬¸ì„œ ê¸°ë°˜**: `install-guide`

## ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹

monoserver í”„ë¡œì íŠ¸ëŠ” **Task ê¸°ë°˜ ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

### í˜•ì‹

```
[task] í•œê¸€ ì„¤ëª…
```

### ì˜ˆì‹œ

```bash
[caddyfile-generator] domain íŒŒë¼ë¯¸í„° ì¶”ê°€ ë° í…ŒìŠ¤íŠ¸ ì‘ì„±
[github-action] deploy.ymlì—ì„œ GCE_HOST secret ì—°ë™
[docker-rootless] CAP_NET_BIND_SERVICE ì„¤ì • ì¶”ê°€
[project] README ì—…ë°ì´íŠ¸ (Caddy, HTTPS, subdomain routing)
```

### ê·œì¹™

1. **Task ì´ë¦„**: ëŒ€ê´„í˜¸ `[]` ì•ˆì— task ì´ë¦„ ì‘ì„± (ì˜ë¬¸, ì†Œë¬¸ì, í•˜ì´í”ˆ)
2. **ì„¤ëª…**: í•œê¸€ë¡œ ëª…í™•í•˜ê²Œ ì‘ì„±
3. **ê°„ê²°í•¨**: í•œ ì¤„ë¡œ ìš”ì•½ (ìƒì„¸ ë‚´ìš©ì€ bodyì— ì‘ì„±)
4. **ì ‘ë‘ì‚¬ ê¸ˆì§€**: `fix:`, `feat:`, `chore:` ë“±ì˜ conventional commits ì ‘ë‘ì‚¬ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
   - âŒ `fix: [task] ë²„ê·¸ ìˆ˜ì •`
   - âœ… `[task] ë²„ê·¸ ìˆ˜ì •`

### íŠ¹ìˆ˜ ì¼€ì´ìŠ¤

- **ì—¬ëŸ¬ Task ë™ì‹œ ìˆ˜ì •**: ê° Taskë¥¼ ë³„ë„ ëŒ€ê´„í˜¸ë¡œ ëª…ì‹œ
  ```
  [github-action] [devlog] deploy.yml ì—ëŸ¬ ì²˜ë¦¬ ìˆ˜ì • ë° devlog ì—…ë°ì´íŠ¸
  [caddyfile-generator] [github-action] ì„¤ì • íŒŒì¼ ìƒì„± ë° ì›Œí¬í”Œë¡œìš° ì—°ë™
  ```

- **í”„ë¡œì íŠ¸ ì „ì²´ ì„¤ì •**: `[project]` ì‚¬ìš©
  ```
  [project] .gitignore ì—…ë°ì´íŠ¸
  [project] README ì—…ë°ì´íŠ¸ (Caddy, HTTPS, subdomain routing)
  ```

- **Claude ê´€ë ¨ ì„¤ì •**: `[claude]` ì‚¬ìš©
  ```
  [claude] CLAUDE.md êµ¬ì¡° ì„¤ëª… ì¶”ê°€
  [claude] devlog ì‹œìŠ¤í…œ ê°œì„ 
  ```

- **ìë™ ìƒì„± ì»¤ë°‹**: ì˜ˆì™¸ì ìœ¼ë¡œ `chore:` ì ‘ë‘ì‚¬ ì‚¬ìš© (GitHub Actions ìë™ ì»¤ë°‹)
  ```
  chore: regenerate Caddyfile
  ```

## devlog ì‹œìŠ¤í…œ

monoserver í”„ë¡œì íŠ¸ëŠ” **devlog ì‹œìŠ¤í…œ**ì„ ì‚¬ìš©í•˜ì—¬ ê°œë°œ ì‘ì—…ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### devlog ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
.claude/
â”œâ”€â”€ claude.md              # ì´ ë¬¸ì„œ (Claude Code ê°€ì´ë“œ)
â””â”€â”€ devlog/
    â”œâ”€â”€ main.md            # í”„ë¡œì íŠ¸ ì „ì²´ ì§„í–‰ ìƒí™© (ì‹œì‘ì )
    â”œâ”€â”€ nginx-conf-generator.md
    â”œâ”€â”€ github-action.md
    â”œâ”€â”€ google-compute-engine.md
    â””â”€â”€ install-guide.md
```

### ìƒˆë¡œìš´ Task ì‹œì‘ í”„ë¡œì„¸ìŠ¤

ì‚¬ìš©ìê°€ ìƒˆë¡œìš´ Taskë¥¼ ì‹œì‘í•˜ê³  ì‹¶ì„ ë•Œ (ì˜ˆ: Docker rootless ì„¤ì •, ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ë“±):

1. **ìƒˆë¡œìš´ devlog íŒŒì¼ ìƒì„±**
   - `.claude/devlog/` ë””ë ‰í† ë¦¬ì— task ì´ë¦„ìœ¼ë¡œ íŒŒì¼ ìƒì„± (ì˜ˆ: `docker-rootless.md`)
   - í…œí”Œë¦¿ êµ¬ì¡° ì‚¬ìš©:
     - ê°œìš”
     - ëª©í‘œ
     - TODO ë¦¬ìŠ¤íŠ¸
     - í´ë¡œë“œ ì½”ë“œ ì¼ê¸° ì„¹ì…˜

2. **main.md ì—…ë°ì´íŠ¸**
   - Task ì§„í–‰ ìƒí™© í…Œì´ë¸”ì— ìƒˆ í•­ëª© ì¶”ê°€
   - ìš°ì„ ìˆœìœ„ ì„¤ì • (P0, P1, P2 ë“±)
   - ìƒíƒœë¥¼ ğŸŸ¡ ì¤€ë¹„ì¤‘ ë˜ëŠ” ğŸŸ¢ ì§„í–‰ì¤‘ìœ¼ë¡œ ì„¤ì •
   - Task ì˜ì¡´ì„± ë‹¤ì´ì–´ê·¸ë¨ ì—…ë°ì´íŠ¸ (í•„ìš”ì‹œ)

3. **ì‘ì—… ìˆ˜í–‰**
   - ìƒˆë¡œ ìƒì„±í•œ devlog íŒŒì¼ì˜ TODOë¥¼ ë”°ë¼ ì§„í–‰
   - ì§„í–‰ ìƒí™©ì„ devlogì— ê¸°ë¡

4. **CLAUDE.md ì—…ë°ì´íŠ¸ (í•„ìš”ì‹œ)**
   - ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë‚˜ ê·œì¹™ì´ ë°œê²¬ë˜ë©´ ì´ ë¬¸ì„œ ì—…ë°ì´íŠ¸
   - ë‹¤ìŒ Claude Codeê°€ ë™ì¼í•œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë”°ë¥´ë„ë¡ ëª…ì‹œ

### ê¸°ì¡´ Task ì‘ì—… ì‹œì‘ í”„ë¡œì„¸ìŠ¤

Claude Codeê°€ monoserver í”„ë¡œì íŠ¸ì—ì„œ ê¸°ì¡´ Taskë¥¼ ì‘ì—…í•  ë•Œ ë‹¤ìŒ ìˆœì„œë¥¼ ë”°ë¦…ë‹ˆë‹¤:

1. **`.claude/devlog/main.md` ì½ê¸°**
   - í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš” íŒŒì•…
   - í˜„ì¬ ì§„í–‰ ìƒí™© í™•ì¸
   - ë‹¤ìŒì— í•´ì•¼ í•  ì‘ì—… í™•ì¸
   - Task ìš°ì„ ìˆœìœ„ ë° ì˜ì¡´ì„± íŒŒì•…

2. **í•´ë‹¹ Task íŒŒì¼ ì½ê¸°**
   - Task ì„¤ëª… ë° ìš”êµ¬ì‚¬í•­ ì´í•´
   - TODO ë¦¬ìŠ¤íŠ¸ í™•ì¸
   - ì´ì „ Claude Codeê°€ ë‚¨ê¸´ ì¼ê¸° ì½ê¸°

3. **ì‘ì—… ìˆ˜í–‰**
   - TODO ë¦¬ìŠ¤íŠ¸ì— ë”°ë¼ ì‘ì—… ì§„í–‰
   - ë¬¸ì œê°€ ë°œìƒí•˜ë©´ í•´ê²° ì‹œë„ ë° ê¸°ë¡
   - í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

4. **devlog ì—…ë°ì´íŠ¸**
   - TODO ë¦¬ìŠ¤íŠ¸ ì²´í¬
   - "í´ë¡œë“œ ì½”ë“œ ì¼ê¸°" ì„¹ì…˜ì— ì‘ì—… ë‚´ìš© ê¸°ë¡:
     - ì§„í–‰í•œ ë‚´ìš©
     - ì„±ê³µí•œ ë¶€ë¶„
     - ì‹¤íŒ¨í•œ ë¶€ë¶„ ë° ì›ì¸
     - ë‹¤ìŒ ë‹¨ê³„ ì œì•ˆ
     - ë‹¤ìŒ Claude Codeë¥¼ ìœ„í•œ ì¡°ì–¸

5. **main.md ì—…ë°ì´íŠ¸**
   - Task ìƒíƒœ ë³€ê²½ (ğŸŸ¡ â†’ ğŸŸ¢ â†’ âœ…)
   - ìµœê·¼ ì—…ë°ì´íŠ¸ ì„¹ì…˜ì— ì‘ì—… ë‚´ìš© ê¸°ë¡

### ìƒíƒœ ì•„ì´ì½˜

- ğŸ”´ **ì°¨ë‹¨ë¨** (Blocked): ë‹¤ë¥¸ ì‘ì—…ì´ ì™„ë£Œë˜ì–´ì•¼ ì§„í–‰ ê°€ëŠ¥
- ğŸŸ¡ **ì¤€ë¹„ì¤‘** (Not Started): ì•„ì§ ì‹œì‘ ì•ˆ í•¨
- ğŸŸ¢ **ì§„í–‰ì¤‘** (In Progress): í˜„ì¬ ì‘ì—… ì¤‘
- âœ… **ì™„ë£Œ** (Completed): ì‘ì—… ì™„ë£Œ
- â¸ï¸ **ë³´ë¥˜** (On Hold): ì„ì‹œë¡œ ì¤‘ë‹¨

### í´ë¡œë“œ ì½”ë“œ ì¼ê¸° ì‘ì„± ê°€ì´ë“œ

"í´ë¡œë“œ ì½”ë“œ ì¼ê¸°"ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì„¹ì…˜ì…ë‹ˆë‹¤. ë‹¤ìŒ Claude Code ì„¸ì…˜ì´ ì´ ë‚´ìš©ì„ ì½ê³  ì–´ë””ì„œë¶€í„° ì‹œì‘í•´ì•¼ í• ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì¢‹ì€ ì¼ê¸° ì˜ˆì‹œ**:
```markdown
### 2026-01-03 - Caddyfile Generator domain íŒŒë¼ë¯¸í„° ì¶”ê°€

**ìƒíƒœ**: ğŸŸ¡ ì¤€ë¹„ì¤‘ â†’ ğŸŸ¢ ì§„í–‰ì¤‘ â†’ âœ… ì™„ë£Œ

**ì§„í–‰ ë‚´ìš©**:
- caddyfile-generatorì— --domain íŒŒë¼ë¯¸í„° ì¶”ê°€
- localhost ëŒ€ì‹  ì‚¬ìš©ì ë„ë©”ì¸ìœ¼ë¡œ Caddyfile ìƒì„± ê°€ëŠ¥
- subdomain routing ì§€ì› (hello.example.com)
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„± (08-with-custom-domain)
- ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ (6/6)

**ë‹¤ìŒ ë‹¨ê³„**:
1. README ì—…ë°ì´íŠ¸ (Caddy, HTTPS, subdomain routing)
2. CLAUDE.md ì—…ë°ì´íŠ¸

**ê³ ë ¤ì‚¬í•­**:
- domainì€ optionalì´ë©° ê¸°ë³¸ê°’ì€ localhost
- GCE_HOST secretì— ì‹¤ì œ ë„ë©”ì¸ ì‚¬ìš©

**ë¸”ë¡œì»¤**: ì—†ìŒ

**í…ŒìŠ¤íŠ¸ ê²°ê³¼**:
- âœ… domain íŒŒë¼ë¯¸í„° ì¶”ê°€ ì„±ê³µ
- âœ… subdomain routing ìƒì„± í™•ì¸
- âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼

---

> ë‹¤ìŒ í´ë¡œë“œ ì½”ë“œì—ê²Œ:
> - Caddyê°€ ìë™ìœ¼ë¡œ Let's Encrypt SSL ì¸ì¦ì„œë¥¼ ë°œê¸‰í•©ë‹ˆë‹¤
> - ë„ë©”ì¸ì´ í•„ìˆ˜ì´ë©°, localhostëŠ” HTTPSë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
```

**ë‚˜ìœ ì¼ê¸° ì˜ˆì‹œ** (í”¼í•´ì•¼ í•¨):
```markdown
### 2025-12-26 - ì‘ì—…í•¨

**ì§„í–‰ ë‚´ìš©**:
- ì½”ë“œ ì‘ì„±

**ë‹¤ìŒ ë‹¨ê³„**:
- í…ŒìŠ¤íŠ¸

> ë‹¤ìŒ í´ë¡œë“œ ì½”ë“œì—ê²Œ:
> - ì—´ì‹¬íˆ í•˜ì„¸ìš”
```

## ì£¼ìš” ê¸°ìˆ  ìŠ¤íƒ

- **Reverse Proxy**: Caddy (ìë™ HTTPS, subdomain routing)
- **Container Orchestration**: Docker Compose
- **CI/CD**: GitHub Actions
- **SSL Certificates**: Let's Encrypt (Caddy ìë™ ê´€ë¦¬)
- **Routing**: Subdomain-based (`hello.yourdomain.com`)

## í•µì‹¬ ê°œë…

- **x-caddy-port**: compose.yamlì—ì„œ ì„œë¹„ìŠ¤ í¬íŠ¸ë¥¼ ì§€ì •í•˜ëŠ” custom field
- **Caddyfile**: Caddy ì„¤ì • íŒŒì¼ (caddyfile-generatorê°€ ìë™ ìƒì„±)
- **Subdomain Routing**: ê° ì„œë¹„ìŠ¤ê°€ ë³„ë„ì˜ subdomainì„ ê°€ì§
- **ìë™ HTTPS**: Caddyê°€ Let's Encryptë¡œ ìë™ìœ¼ë¡œ ì¸ì¦ì„œ ë°œê¸‰ ë° ê°±ì‹ 

## ë§ˆë¬´ë¦¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

ì‘ì—…ì„ ë§ˆì¹˜ê¸° ì „ì—:
- [ ] TODO ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
- [ ] "í´ë¡œë“œ ì½”ë“œ ì¼ê¸°" ì‘ì„± (êµ¬ì²´ì ìœ¼ë¡œ!)
- [ ] í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡
- [ ] ë‹¤ìŒ Claude Codeë¥¼ ìœ„í•œ ì¡°ì–¸ ì‘ì„±
- [ ] main.mdì˜ Task ìƒíƒœ ì—…ë°ì´íŠ¸
- [ ] main.mdì˜ "ìµœê·¼ ì—…ë°ì´íŠ¸" ì„¹ì…˜ì— í•­ëª© ì¶”ê°€
- [ ] **ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ í™•ì¸**: `[task] í•œê¸€ ì„¤ëª…` í˜•ì‹ ì¤€ìˆ˜

---

**ì´ devlog ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ë©´ Claude Code ì„¸ì…˜ ê°„ì— ì»¨í…ìŠ¤íŠ¸ê°€ ìœ ì§€ë©ë‹ˆë‹¤.**
